const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SearchResults-vtHMZZQq.js","assets/radix-ui-BcSx3G5H.js","assets/i18n-ypqydtMl.js","assets/pdfjs-BSiS5sPf.js"])))=>i.map(i=>d[i]);
var St=Object.defineProperty;var kt=(a,e,t)=>e in a?St(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var me=(a,e,t)=>kt(a,typeof e!="symbol"?e+"":e,t);import{a as ot,R as _,r as f,j as l}from"./radix-ui-BcSx3G5H.js";import{u as re,i as Ct,B as Nt,a as Ft}from"./i18n-ypqydtMl.js";import{_ as Dt,a as he,b as jt}from"./pdfjs-BSiS5sPf.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var Ie={},qe=ot;Ie.createRoot=qe.createRoot,Ie.hydrateRoot=qe.hydrateRoot;function st(a){var e,t,n="";if(typeof a=="string"||typeof a=="number")n+=a;else if(typeof a=="object")if(Array.isArray(a))for(e=0;e<a.length;e++)a[e]&&(t=st(a[e]))&&(n&&(n+=" "),n+=t);else for(e in a)a[e]&&(n&&(n+=" "),n+=e);return n}function Q(){for(var a,e,t=0,n="";t<arguments.length;)(a=arguments[t++])&&(e=st(a))&&(n&&(n+=" "),n+=e);return n}let Rt={data:""},_t=a=>{if(typeof window=="object"){let e=(a?a.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(a||document.head).appendChild(e),e.firstChild}return a||Rt},Lt=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,It=/\/\*[^]*?\*\/|  +/g,He=/\n+/g,K=(a,e)=>{let t="",n="",r="";for(let o in a){let s=a[o];o[0]=="@"?o[1]=="i"?t=o+" "+s+";":n+=o[1]=="f"?K(s,o):o+"{"+K(s,o[1]=="k"?"":e)+"}":typeof s=="object"?n+=K(s,e?e.replace(/([^,])+/g,i=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,i):i?i+" "+c:c)):o):s!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=K.p?K.p(o,s):o+":"+s+";")}return t+(e&&r?e+"{"+r+"}":r)+n},q={},it=a=>{if(typeof a=="object"){let e="";for(let t in a)e+=t+it(a[t]);return e}return a},Tt=(a,e,t,n,r)=>{let o=it(a),s=q[o]||(q[o]=(c=>{let d=0,m=11;for(;d<c.length;)m=101*m+c.charCodeAt(d++)>>>0;return"go"+m})(o));if(!q[s]){let c=o!==a?a:(d=>{let m,h,p=[{}];for(;m=Lt.exec(d.replace(It,""));)m[4]?p.shift():m[3]?(h=m[3].replace(He," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][m[1]]=m[2].replace(He," ").trim();return p[0]})(a);q[s]=K(r?{["@keyframes "+s]:c}:c,t?"":"."+s)}let i=t&&q.g?q.g:null;return t&&(q.g=q[s]),((c,d,m,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=m?c+d.data:d.data+c)})(q[s],e,n,i),s},At=(a,e,t)=>a.reduce((n,r,o)=>{let s=e[o];if(s&&s.call){let i=s(t),c=i&&i.props&&i.props.className||/^go/.test(i)&&i;s=c?"."+c:i&&typeof i=="object"?i.props?"":K(i,""):i===!1?"":i}return n+r+(s??"")},"");function Pe(a){let e=this||{},t=a.call?a(e.p):a;return Tt(t.unshift?t.raw?At(t,[].slice.call(arguments,1),e.p):t.reduce((n,r)=>Object.assign(n,r&&r.call?r(e.p):r),{}):t,_t(e.target),e.g,e.o,e.k)}Pe.bind({g:1});Pe.bind({k:1});function Pt(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function lt(a,e,t){return e&&Pt(a.prototype,e),a}function R(){return R=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},R.apply(this,arguments)}function ct(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.__proto__=e}function de(a,e){if(a==null)return{};var t={},n=Object.keys(a),r,o;for(o=0;o<n.length;o++)r=n[o],!(e.indexOf(r)>=0)&&(t[r]=a[r]);return t}function Be(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}var We=function(){return""},dt=_.createContext({enqueueSnackbar:We,closeSnackbar:We}),U={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},Ve=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Me=function(e){return""+Ve(e.vertical)+Ve(e.horizontal)},pe=function(e){return!!e||e===0},ge="unmounted",G="exited",J="entering",se="entered",Ue="exiting",Oe=function(a){ct(e,a);function e(n){var r;r=a.call(this,n)||this;var o=n.appear,s;return r.appearStatus=null,n.in?o?(s=G,r.appearStatus=J):s=se:n.unmountOnExit||n.mountOnEnter?s=ge:s=G,r.state={status:s},r.nextCallback=null,r}e.getDerivedStateFromProps=function(r,o){var s=r.in;return s&&o.status===ge?{status:G}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(r){var o=null;if(r!==this.props){var s=this.state.status;this.props.in?s!==J&&s!==se&&(o=J):(s===J||s===se)&&(o=Ue)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var r=this.props.timeout,o=r,s=r;return r!=null&&typeof r!="number"&&typeof r!="string"&&(s=r.exit,o=r.enter),{exit:s,enter:o}},t.updateStatus=function(r,o){r===void 0&&(r=!1),o!==null?(this.cancelNextCallback(),o===J?this.performEnter(r):this.performExit()):this.props.unmountOnExit&&this.state.status===G&&this.setState({status:ge})},t.performEnter=function(r){var o=this,s=this.props.enter,i=r,c=this.getTimeouts();if(!r&&!s){this.safeSetState({status:se},function(){o.props.onEntered&&o.props.onEntered(o.node,i)});return}this.props.onEnter&&this.props.onEnter(this.node,i),this.safeSetState({status:J},function(){o.props.onEntering&&o.props.onEntering(o.node,i),o.onTransitionEnd(c.enter,function(){o.safeSetState({status:se},function(){o.props.onEntered&&o.props.onEntered(o.node,i)})})})},t.performExit=function(){var r=this,o=this.props.exit,s=this.getTimeouts();if(!o){this.safeSetState({status:G},function(){r.props.onExited&&r.props.onExited(r.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:Ue},function(){r.props.onExiting&&r.props.onExiting(r.node),r.onTransitionEnd(s.exit,function(){r.safeSetState({status:G},function(){r.props.onExited&&r.props.onExited(r.node)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(r,o){o=this.setNextCallback(o),this.setState(r,o)},t.setNextCallback=function(r){var o=this,s=!0;return this.nextCallback=function(){s&&(s=!1,o.nextCallback=null,r())},this.nextCallback.cancel=function(){s=!1},this.nextCallback},t.onTransitionEnd=function(r,o){this.setNextCallback(o);var s=r==null&&!this.props.addEndListener;if(!this.node||s){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),r!=null&&setTimeout(this.nextCallback,r)},t.render=function(){var r=this.state.status;if(r===ge)return null;var o=this.props,s=o.children,i=de(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return s(r,i)},lt(e,[{key:"node",get:function(){var r,o=(r=this.props.nodeRef)===null||r===void 0?void 0:r.current;if(!o)throw new Error("notistack - Custom snackbar is not refForwarding");return o}}]),e}(_.Component);function ee(){}Oe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ee,onEntering:ee,onEntered:ee,onExit:ee,onExiting:ee,onExited:ee};function Ke(a,e){typeof a=="function"?a(e):a&&(a.current=e)}function Te(a,e){return f.useMemo(function(){return a==null&&e==null?null:function(t){Ke(a,t),Ke(e,t)}},[a,e])}function ke(a){var e=a.timeout,t=a.style,n=t===void 0?{}:t,r=a.mode;return{duration:typeof e=="object"?e[r]||0:e,easing:n.transitionTimingFunction,delay:n.transitionDelay}}var Ae={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},ut=function(e){e.scrollTop=e.scrollTop},Xe=function(e){return Math.round(e)+"ms"};function te(a,e){a===void 0&&(a=["all"]);var t=e||{},n=t.duration,r=n===void 0?300:n,o=t.easing,s=o===void 0?Ae.easeInOut:o,i=t.delay,c=i===void 0?0:i,d=Array.isArray(a)?a:[a];return d.map(function(m){var h=typeof r=="string"?r:Xe(r),p=typeof c=="string"?c:Xe(c);return m+" "+h+" "+s+" "+p}).join(",")}function Mt(a){return a&&a.ownerDocument||document}function ft(a){var e=Mt(a);return e.defaultView||window}function Ot(a,e){e===void 0&&(e=166);var t;function n(){for(var r=this,o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];var c=function(){a.apply(r,s)};clearTimeout(t),t=setTimeout(c,e)}return n.clear=function(){clearTimeout(t)},n}function $t(a,e){var t=e.getBoundingClientRect(),n=ft(e),r;if(e.fakeTransform)r=e.fakeTransform;else{var o=n.getComputedStyle(e);r=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var s=0,i=0;if(r&&r!=="none"&&typeof r=="string"){var c=r.split("(")[1].split(")")[0].split(",");s=parseInt(c[4],10),i=parseInt(c[5],10)}switch(a){case"left":return"translateX("+(n.innerWidth+s-t.left)+"px)";case"right":return"translateX(-"+(t.left+t.width-s)+"px)";case"up":return"translateY("+(n.innerHeight+i-t.top)+"px)";default:return"translateY(-"+(t.top+t.height-i)+"px)"}}function xe(a,e){if(e){var t=$t(a,e);t&&(e.style.webkitTransform=t,e.style.transform=t)}}var mt=f.forwardRef(function(a,e){var t=a.children,n=a.direction,r=n===void 0?"down":n,o=a.in,s=a.style,i=a.timeout,c=i===void 0?0:i,d=a.onEnter,m=a.onEntered,h=a.onExit,p=a.onExited,E=de(a,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),g=f.useRef(null),b=Te(t.ref,g),k=Te(b,e),F=function(y,O){xe(r,y),ut(y),d&&d(y,O)},x=function(y){var O=(s==null?void 0:s.transitionTimingFunction)||Ae.easeOut,$=ke({timeout:c,mode:"enter",style:R({},s,{transitionTimingFunction:O})});y.style.webkitTransition=te("-webkit-transform",$),y.style.transition=te("transform",$),y.style.webkitTransform="none",y.style.transform="none"},v=function(y){var O=(s==null?void 0:s.transitionTimingFunction)||Ae.sharp,$=ke({timeout:c,mode:"exit",style:R({},s,{transitionTimingFunction:O})});y.style.webkitTransition=te("-webkit-transform",$),y.style.transition=te("transform",$),xe(r,y),h&&h(y)},L=function(y){y.style.webkitTransition="",y.style.transition="",p&&p(y)},P=f.useCallback(function(){g.current&&xe(r,g.current)},[r]);return f.useEffect(function(){if(!(o||r==="down"||r==="right")){var D=Ot(function(){g.current&&xe(r,g.current)}),y=ft(g.current);return y.addEventListener("resize",D),function(){D.clear(),y.removeEventListener("resize",D)}}},[r,o]),f.useEffect(function(){o||P()},[o,P]),f.createElement(Oe,Object.assign({appear:!0,nodeRef:g,onEnter:F,onEntered:m,onEntering:x,onExit:v,onExited:L,in:o,timeout:c},E),function(D,y){return f.cloneElement(t,R({ref:k,style:R({visibility:D==="exited"&&!o?"hidden":void 0},s,{},t.props.style)},y))})});mt.displayName="Slide";var Ce=function(e){return _.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},zt=function(){return _.createElement(Ce,null,_.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},qt=function(){return _.createElement(Ce,null,_.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},Ht=function(){return _.createElement(Ce,null,_.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},Bt=function(){return _.createElement(Ce,null,_.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Wt={default:void 0,success:_.createElement(zt,null),warning:_.createElement(qt,null),error:_.createElement(Ht,null),info:_.createElement(Bt,null)},X={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Wt,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:mt,transitionDuration:{enter:225,exit:195}},Vt=function(e,t){var n=function(o){return typeof o=="number"||o===null};return n(e)?e:n(t)?t:X.autoHideDuration},Ut=function(e,t){var n=function(o,s){return s.some(function(i){return typeof o===i})};return n(e,["string","number"])?e:n(e,["object"])?R({},X.transitionDuration,{},n(t,["object"])&&t,{},e):n(t,["string","number"])?t:n(t,["object"])?R({},X.transitionDuration,{},t):X.transitionDuration},Kt=function(e,t){return function(n,r){return r===void 0&&(r=!1),r?R({},X[n],{},t[n],{},e[n]):n==="autoHideDuration"?Vt(e.autoHideDuration,t.autoHideDuration):n==="transitionDuration"?Ut(e.transitionDuration,t.transitionDuration):e[n]||t[n]||X[n]}};function ue(a){return Object.entries(a).reduce(function(e,t){var n,r=t[0],o=t[1];return R({},e,(n={},n[r]=Pe(o),n))},{})}var ne={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},Qe=ue({root:{height:0},entered:{height:"auto"}}),Fe="0px",De=175,ht=f.forwardRef(function(a,e){var t=a.children,n=a.in,r=a.onExited,o=f.useRef(null),s=f.useRef(null),i=Te(e,s),c=function(){return o.current?o.current.clientHeight:0},d=function(b){b.style.height=Fe},m=function(b){var k=c(),F=ke({timeout:De,mode:"enter"}),x=F.duration,v=F.easing;b.style.transitionDuration=typeof x=="string"?x:x+"ms",b.style.height=k+"px",b.style.transitionTimingFunction=v||""},h=function(b){b.style.height="auto"},p=function(b){b.style.height=c()+"px"},E=function(b){ut(b);var k=ke({timeout:De,mode:"exit"}),F=k.duration,x=k.easing;b.style.transitionDuration=typeof F=="string"?F:F+"ms",b.style.height=Fe,b.style.transitionTimingFunction=x||""};return f.createElement(Oe,{in:n,unmountOnExit:!0,onEnter:d,onEntered:h,onEntering:m,onExit:p,onExited:r,onExiting:E,nodeRef:s,timeout:De},function(g,b){return f.createElement("div",Object.assign({ref:i,className:Q(Qe.root,g==="entered"&&Qe.entered),style:R({pointerEvents:"all",overflow:"hidden",minHeight:Fe,transition:te("height")},g==="entered"&&{overflow:"visible"},{},g==="exited"&&!n&&{visibility:"hidden"})},b),f.createElement("div",{ref:o,className:ne.CollapseWrapper,style:{display:"flex",width:"100%"}},t))})});ht.displayName="Collapse";var Ze={right:"left",left:"right",bottom:"up",top:"down"},Xt=function(e){return e.horizontal!=="center"?Ze[e.horizontal]:Ze[e.vertical]},Qt=function(e){return"anchorOrigin"+Me(e)},Zt=function(e){e===void 0&&(e={});var t={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(n){return!t[n]}).reduce(function(n,r){var o;return R({},n,(o={},o[r]=e[r],o))},{})},Yt=function(){};function ce(a,e){return a.reduce(function(t,n){return n==null?t:function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];var c=[].concat(s);e&&c.indexOf(e)===-1&&c.push(e),t.apply(this,c),n.apply(this,c)}},Yt)}var Gt=typeof window<"u"?f.useLayoutEffect:f.useEffect;function Ye(a){var e=f.useRef(a);return Gt(function(){e.current=a}),f.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var pt=f.forwardRef(function(a,e){var t=a.children,n=a.className,r=a.autoHideDuration,o=a.disableWindowBlurListener,s=o===void 0?!1:o,i=a.onClose,c=a.id,d=a.open,m=a.SnackbarProps,h=m===void 0?{}:m,p=f.useRef(),E=Ye(function(){i&&i.apply(void 0,arguments)}),g=Ye(function(v){!i||v==null||(p.current&&clearTimeout(p.current),p.current=setTimeout(function(){E(null,"timeout",c)},v))});f.useEffect(function(){return d&&g(r),function(){p.current&&clearTimeout(p.current)}},[d,r,g]);var b=function(){p.current&&clearTimeout(p.current)},k=f.useCallback(function(){r!=null&&g(r*.5)},[r,g]),F=function(L){h.onMouseEnter&&h.onMouseEnter(L),b()},x=function(L){h.onMouseLeave&&h.onMouseLeave(L),k()};return f.useEffect(function(){if(!s&&d)return window.addEventListener("focus",k),window.addEventListener("blur",b),function(){window.removeEventListener("focus",k),window.removeEventListener("blur",b)}},[s,k,d]),f.createElement("div",Object.assign({ref:e},h,{className:Q(ne.Snackbar,n),onMouseEnter:F,onMouseLeave:x}),t)});pt.displayName="Snackbar";var je,Jt=ue({root:(je={display:"flex",flexWrap:"wrap",flexGrow:1},je[U.upSm]={flexGrow:"initial",minWidth:"288px"},je)}),gt=f.forwardRef(function(a,e){var t=a.className,n=de(a,["className"]);return _.createElement("div",Object.assign({ref:e,className:Q(Jt.root,t)},n))});gt.displayName="SnackbarContent";var ie=ue({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),Ge="notistack-snackbar",xt=f.forwardRef(function(a,e){var t=a.id,n=a.message,r=a.action,o=a.iconVariant,s=a.variant,i=a.hideIconVariant,c=a.style,d=a.className,m=o[s],h=r;return typeof h=="function"&&(h=h(t)),_.createElement(gt,{ref:e,role:"alert","aria-describedby":Ge,style:c,className:Q(ne.MuiContent,ne.MuiContentVariant(s),ie.root,ie[s],d,!i&&m&&ie.lessPadding)},_.createElement("div",{id:Ge,className:ie.message},i?null:m,n),h&&_.createElement("div",{className:ie.action},h))});xt.displayName="MaterialDesignContent";var en=f.memo(xt),tn=ue({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),nn=function(e){var t=f.useRef(),n=f.useState(!0),r=n[0],o=n[1],s=ce([e.snack.onClose,e.onClose]),i=function(){e.snack.requestClose&&s(null,"instructed",e.snack.id)},c=f.useCallback(function(){t.current=setTimeout(function(){o(function($){return!$})},125)},[]);f.useEffect(function(){return function(){t.current&&clearTimeout(t.current)}},[]);var d=e.snack,m=e.classes,h=e.Component,p=h===void 0?en:h,E=f.useMemo(function(){return Zt(m)},[m]),g=d.open,b=d.SnackbarProps,k=d.TransitionComponent,F=d.TransitionProps,x=d.transitionDuration,v=d.disableWindowBlurListener,L=d.content,P=de(d,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),D=R({direction:Xt(P.anchorOrigin),timeout:x},F),y=L;typeof y=="function"&&(y=y(P.id,P.message));var O=["onEnter","onEntered","onExit","onExited"].reduce(function($,C){var I;return R({},$,(I={},I[C]=ce([e.snack[C],e[C]],P.id),I))},{});return _.createElement(ht,{in:r,onExited:O.onExited},_.createElement(pt,{open:g,id:P.id,disableWindowBlurListener:v,autoHideDuration:P.autoHideDuration,className:Q(tn.wrappedRoot,E.root,E[Qt(P.anchorOrigin)]),SnackbarProps:b,onClose:s},_.createElement(k,Object.assign({},D,{appear:!0,in:g,onExit:O.onExit,onExited:c,onEnter:O.onEnter,onEntered:ce([O.onEntered,i],P.id)}),y||_.createElement(p,Object.assign({},P)))))},le,Re,ve,be,_e,H={view:{default:20},snackbar:{default:6,dense:2}},Je="."+ne.CollapseWrapper,Le=16,ye=ue({root:(le={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:te(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},le[Je]={padding:H.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},le.maxWidth="calc(100% - "+H.view.default*2+"px)",le[U.downXs]={width:"100%",maxWidth:"calc(100% - "+Le*2+"px)"},le),rootDense:(Re={},Re[Je]={padding:H.snackbar.dense+"px 0px"},Re),top:{top:H.view.default-H.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:H.view.default-H.snackbar.default+"px",flexDirection:"column-reverse"},left:(ve={left:H.view.default+"px"},ve[U.upSm]={alignItems:"flex-start"},ve[U.downXs]={left:Le+"px"},ve),right:(be={right:H.view.default+"px"},be[U.upSm]={alignItems:"flex-end"},be[U.downXs]={right:Le+"px"},be),center:(_e={left:"50%",transform:"translateX(-50%)"},_e[U.upSm]={alignItems:"center"},_e)}),rn=function(e){var t=e.classes,n=t===void 0?{}:t,r=e.anchorOrigin,o=e.dense,s=e.children,i=Q(ne.SnackbarContainer,ye[r.vertical],ye[r.horizontal],ye.root,n.containerRoot,n["containerAnchorOrigin"+Me(r)],o&&ye.rootDense);return _.createElement("div",{className:i},s)},an=f.memo(rn),et=function(e){var t=typeof e=="string"||f.isValidElement(e);return!t},on=function(a){ct(e,a);function e(n){var r;return r=a.call(this,n)||this,r.enqueueSnackbar=function(o,s){if(s===void 0&&(s={}),o==null)throw new Error("enqueueSnackbar called with invalid argument");var i=et(o)?o:s,c=et(o)?o.message:o,d=i.key,m=i.preventDuplicate,h=de(i,["key","preventDuplicate"]),p=pe(d),E=p?d:new Date().getTime()+Math.random(),g=Kt(h,r.props),b=R({id:E},h,{message:c,open:!0,entered:!1,requestClose:!1,persist:g("persist"),action:g("action"),content:g("content"),variant:g("variant"),anchorOrigin:g("anchorOrigin"),disableWindowBlurListener:g("disableWindowBlurListener"),autoHideDuration:g("autoHideDuration"),hideIconVariant:g("hideIconVariant"),TransitionComponent:g("TransitionComponent"),transitionDuration:g("transitionDuration"),TransitionProps:g("TransitionProps",!0),iconVariant:g("iconVariant",!0),style:g("style",!0),SnackbarProps:g("SnackbarProps",!0),className:Q(r.props.className,h.className)});return b.persist&&(b.autoHideDuration=void 0),r.setState(function(k){if(m===void 0&&r.props.preventDuplicate||m){var F=function(P){return p?P.id===E:P.message===c},x=k.queue.findIndex(F)>-1,v=k.snacks.findIndex(F)>-1;if(x||v)return k}return r.handleDisplaySnack(R({},k,{queue:[].concat(k.queue,[b])}))}),E},r.handleDisplaySnack=function(o){var s=o.snacks;return s.length>=r.maxSnack?r.handleDismissOldest(o):r.processQueue(o)},r.processQueue=function(o){var s=o.queue,i=o.snacks;return s.length>0?R({},o,{snacks:[].concat(i,[s[0]]),queue:s.slice(1,s.length)}):o},r.handleDismissOldest=function(o){if(o.snacks.some(function(m){return!m.open||m.requestClose}))return o;var s=!1,i=!1,c=o.snacks.reduce(function(m,h){return m+(h.open&&h.persist?1:0)},0);c===r.maxSnack&&(i=!0);var d=o.snacks.map(function(m){return!s&&(!m.persist||i)?(s=!0,m.entered?(m.onClose&&m.onClose(null,"maxsnack",m.id),r.props.onClose&&r.props.onClose(null,"maxsnack",m.id),R({},m,{open:!1})):R({},m,{requestClose:!0})):R({},m)});return R({},o,{snacks:d})},r.handleEnteredSnack=function(o,s,i){if(!pe(i))throw new Error("handleEnteredSnack Cannot be called with undefined key");r.setState(function(c){var d=c.snacks;return{snacks:d.map(function(m){return m.id===i?R({},m,{entered:!0}):R({},m)})}})},r.handleCloseSnack=function(o,s,i){r.props.onClose&&r.props.onClose(o,s,i);var c=i===void 0;r.setState(function(d){var m=d.snacks,h=d.queue;return{snacks:m.map(function(p){return!c&&p.id!==i?R({},p):p.entered?R({},p,{open:!1}):R({},p,{requestClose:!0})}),queue:h.filter(function(p){return p.id!==i})}})},r.closeSnackbar=function(o){var s=r.state.snacks.find(function(i){return i.id===o});pe(o)&&s&&s.onClose&&s.onClose(null,"instructed",o),r.handleCloseSnack(null,"instructed",o)},r.handleExitedSnack=function(o,s){if(!pe(s))throw new Error("handleExitedSnack Cannot be called with undefined key");r.setState(function(i){var c=r.processQueue(R({},i,{snacks:i.snacks.filter(function(d){return d.id!==s})}));return c.queue.length===0?c:r.handleDismissOldest(c)})},r.enqueueSnackbar,r.closeSnackbar,r.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:r.enqueueSnackbar.bind(Be(r)),closeSnackbar:r.closeSnackbar.bind(Be(r))}},r}var t=e.prototype;return t.render=function(){var r=this,o=this.state.contextValue,s=this.props,i=s.domRoot,c=s.children,d=s.dense,m=d===void 0?!1:d,h=s.Components,p=h===void 0?{}:h,E=s.classes,g=this.state.snacks.reduce(function(k,F){var x,v=Me(F.anchorOrigin),L=k[v]||[];return R({},k,(x={},x[v]=[].concat(L,[F]),x))},{}),b=Object.keys(g).map(function(k){var F=g[k],x=F[0];return _.createElement(an,{key:k,dense:m,anchorOrigin:x.anchorOrigin,classes:E},F.map(function(v){return _.createElement(nn,{key:v.id,snack:v,classes:E,Component:p[v.variant],onClose:r.handleCloseSnack,onEnter:r.props.onEnter,onExit:r.props.onExit,onExited:ce([r.handleExitedSnack,r.props.onExited],v.id),onEntered:ce([r.handleEnteredSnack,r.props.onEntered],v.id)})}))});return _.createElement(dt.Provider,{value:o},c,i?ot.createPortal(b,i):b)},lt(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||X.maxSnack}}]),e}(f.Component),sn=function(){return f.useContext(dt)};const ln="modulepreload",cn=function(a){return"/"+a},tt={},dn=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=cn(c),c in tt)return;tt[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ln,d||(h.as="script"),h.crossOrigin="",h.href=c,i&&h.setAttribute("nonce",i),document.head.appendChild(h),d)return new Promise((p,E)=>{h.addEventListener("load",p),h.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return r.then(s=>{for(const i of s||[])i.status==="rejected"&&o(i.reason);return e().catch(o)})},Ee=()=>Math.random().toString(36).substring(2,11),un=a=>{const e=new Uint8Array(a);let t="";for(let n=0;n<e.byteLength;n++)t+=String.fromCharCode(e[n]);return btoa(t)},fn=a=>{const e=atob(a),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer},nt=(a,e)=>{if(!e||!e.children||e.children.length===0)return a;const t=e.children.filter(o=>"parentFolderId"in o).map(o=>o.name);if(!t.includes(a))return a;let n=`${a} (new)`,r=1;for(;t.includes(n);)n=`${a} (new ${r})`,r++;return n};class mn{constructor(){me(this,"state",{dataRooms:[],folders:new Map,files:new Map});me(this,"storageKey","dataroom_store");me(this,"searchHistoryKey","dataroom_search_history");this.loadFromStorage()}loadFromStorage(){const e=localStorage.getItem(this.storageKey);if(e)try{const t=JSON.parse(e);this.state.dataRooms=t.dataRooms||[],this.state.folders=new Map(t.folders||[]),this.state.files=new Map((t.files||[]).map(n=>[n.id,{...n,data:n.data?fn(n.data):null}]))}catch(t){console.error("Failed to load storage",t)}}saveToStorage(){const e={dataRooms:this.state.dataRooms,folders:Array.from(this.state.folders.entries()),files:Array.from(this.state.files.entries()).map(([t,n])=>({...n,data:n.data?un(n.data):null}))};try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(t){throw t instanceof Error&&t.name==="QuotaExceededError"?new Error("Storage quota exceeded. Please delete some files or data rooms to continue."):t}}createDataRoom(e){const t=Ee(),n=Ee(),r=Date.now(),o={id:n,name:"root",parentFolderId:null,createdAt:r,updatedAt:r,children:[]},s={id:t,name:e,createdAt:r,updatedAt:r,rootFolderId:n};return this.state.dataRooms.push(s),this.state.folders.set(n,o),this.saveToStorage(),s}getDataRoom(e){return this.state.dataRooms.find(t=>t.id===e)}getAllDataRooms(){return this.state.dataRooms}updateDataRoomName(e,t){const n=this.state.dataRooms.find(r=>r.id===e);n&&(n.name=t,n.updatedAt=Date.now(),this.saveToStorage())}deleteDataRoom(e){const t=this.getDataRoom(e);t&&(this.deleteFolderRecursive(t.rootFolderId),this.state.dataRooms=this.state.dataRooms.filter(n=>n.id!==e),this.saveToStorage())}createFolder(e,t){const n=Ee(),r=Date.now(),o=e&&this.state.folders.get(e)||null,s=nt(t,o),i={id:n,name:s,parentFolderId:e,createdAt:r,updatedAt:r,children:[]};if(this.state.folders.set(n,i),e){const c=this.state.folders.get(e);c&&(c.children.push(i),c.updatedAt=r)}return this.saveToStorage(),i}getFolder(e){return this.state.folders.get(e)}updateFolderName(e,t){const n=this.state.folders.get(e);n&&(n.name=t,n.updatedAt=Date.now(),this.saveToStorage())}deleteFolderRecursive(e){const t=this.state.folders.get(e);if(t){if(t.children.forEach(n=>{"parentFolderId"in n&&n.parentFolderId!==null?this.state.folders.has(n.id)&&this.deleteFolderRecursive(n.id):"data"in n&&this.state.files.delete(n.id)}),t.parentFolderId){const n=this.state.folders.get(t.parentFolderId);n&&(n.children=n.children.filter(r=>r.id!==e))}this.state.folders.delete(e),this.saveToStorage()}}uploadFile(e,t,n,r){const o=Ee(),s=Date.now(),i={id:o,name:t,parentFolderId:e,size:n.byteLength,type:r,createdAt:s,updatedAt:s,data:n};this.state.files.set(o,i);const c=this.state.folders.get(e);return c&&(c.children.push({id:o,name:t,parentFolderId:e,size:n.byteLength,type:r,createdAt:s,updatedAt:s}),c.updatedAt=s),this.saveToStorage(),i}getFile(e){return this.state.files.get(e)}updateFileName(e,t){const n=this.state.files.get(e);if(n){if(n.name=t,n.updatedAt=Date.now(),n.parentFolderId){const r=this.state.folders.get(n.parentFolderId);if(r){const o=r.children.find(s=>s.id===e);o&&(o.name=t,o.updatedAt=Date.now())}}this.saveToStorage()}}deleteFile(e){const t=this.state.files.get(e);if(t){if(t.parentFolderId){const n=this.state.folders.get(t.parentFolderId);n&&(n.children=n.children.filter(r=>r.id!==e),n.updatedAt=Date.now())}this.state.files.delete(e),this.saveToStorage()}}getFilesInFolder(e){const t=this.state.folders.get(e);return t?t.children.filter(n=>!("children"in n)).map(n=>n.name):[]}moveFile(e,t){const n=this.state.files.get(e);if(!n)return;if(n.parentFolderId){const o=this.state.folders.get(n.parentFolderId);o&&(o.children=o.children.filter(s=>s.id!==e),o.updatedAt=Date.now())}n.parentFolderId=t,n.updatedAt=Date.now();const r=this.state.folders.get(t);r&&(r.children.push({id:n.id,name:n.name,parentFolderId:n.parentFolderId,size:n.size,type:n.type,createdAt:n.createdAt,updatedAt:n.updatedAt}),r.updatedAt=Date.now()),this.saveToStorage()}moveFolder(e,t){const n=this.state.folders.get(e);if(!n||e===t)return;const r=this.state.folders.get(t);if(!r)return;const o=nt(n.name,r);if(n.parentFolderId){const s=this.state.folders.get(n.parentFolderId);s&&(s.children=s.children.filter(i=>i.id!==e),s.updatedAt=Date.now())}n.parentFolderId=t,n.name=o,n.updatedAt=Date.now(),r.children.push({id:n.id,name:n.name,parentFolderId:n.parentFolderId,createdAt:n.createdAt,updatedAt:n.updatedAt,children:[]}),r.updatedAt=Date.now(),this.saveToStorage()}getFolderStructure(e){const t=this.state.folders.get(e);if(t)return this.buildFolderStructure(t)}buildFolderStructure(e){const t=e.children.map(n=>{if("data"in n)return n;{const r=this.state.folders.get(n.id);return r?this.buildFolderStructure(r):n}});return{...e,children:t}}getAllFiles(){return Array.from(this.state.files.values())}getAllFolders(){return Array.from(this.state.folders.values())}getFilesFromDataRoom(e){const t=new Map,n=o=>{if(o.children)for(const s of o.children){const i=this.state.folders.get(s.id);if(i)n(i);else{const c=this.getFile(s.id);c&&t.set(c.id,c)}}},r=this.state.folders.get(e);return r&&n(r),t}getSearchHistory(){try{const e=localStorage.getItem(this.searchHistoryKey);return e?JSON.parse(e):[]}catch{return[]}}saveSearchTerm(e){if(e.trim())try{let t=this.getSearchHistory();t=t.filter(n=>n!==e),t.unshift(e),t=t.slice(0,20),localStorage.setItem(this.searchHistoryKey,JSON.stringify(t))}catch(t){console.error("Failed to save search history",t)}}clearSearchHistory(){try{localStorage.removeItem(this.searchHistoryKey)}catch(e){console.error("Failed to clear search history",e)}}}const A=new mn;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),z=(a,e)=>{const t=f.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:i="",children:c,...d},m)=>f.createElement("svg",{ref:m,...hn,width:r,height:r,stroke:n,strokeWidth:s?Number(o)*24/Number(r):o,className:["lucide",`lucide-${pn(a)}`,i].join(" "),...d},[...e.map(([h,p])=>f.createElement(h,p)),...Array.isArray(c)?c:[c]]));return t.displayName=`${a}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=z("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=z("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),B=f.forwardRef(({className:a="",variant:e="default",size:t="default",...n},r)=>{const o="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",s={default:"bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground"},i={default:"h-10 px-4 py-2 text-sm",sm:"h-8 px-3 text-xs",lg:"h-12 px-6 text-base"};return l.jsx("button",{ref:r,className:`${o} ${s[e]} ${i[t]} ${a}`,...n})});B.displayName="Button";function Sn({dataRooms:a,currentDataRoom:e,onSelectDataRoom:t,onCreateDataRoom:n,onDeleteDataRoom:r,onUpdateDataRoomName:o}){const{t:s}=re(),[i,c]=f.useState(!1),[d,m]=f.useState(""),[h,p]=f.useState(null),[E,g]=f.useState(""),b=()=>{if(d.trim()){if(a.some(v=>v.name.toLowerCase()===d.trim().toLowerCase())){alert(s("dataroom.duplicateNameError",{name:d}));return}n(d),m(""),c(!1)}},k=x=>{if(E.trim()){if(a.some(L=>L.id!==x&&L.name.toLowerCase()===E.trim().toLowerCase())){alert(s("dataroom.duplicateNameError",{name:E}));return}o(x,E),p(null),g("")}},F=(x,v)=>{p(x),g(v)};return l.jsxs("div",{className:"w-80 bg-card border-r border-border flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-border",children:[l.jsx("h1",{className:"text-xl font-semibold mb-4",children:s("dataroom.title")}),l.jsxs(B,{onClick:()=>c(!0),className:"w-full gap-2 bg-slate-600 hover:bg-slate-700 text-white",children:[l.jsx(we,{size:18}),s("dataroom.newDataRoom")]})]}),i&&l.jsxs("div",{className:"p-4 border-b border-border space-y-2",children:[l.jsx("input",{type:"text",placeholder:s("dataroom.dataroomName"),value:d,onChange:x=>m(x.target.value),onKeyPress:x=>{x.key==="Enter"&&b()},className:"w-full px-3 py-2 border border-input rounded-md text-sm bg-background",autoFocus:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(B,{size:"sm",onClick:b,disabled:!d.trim(),className:"flex-1",children:"Create"}),l.jsx(B,{size:"sm",variant:"outline",onClick:()=>{c(!1),m("")},className:"flex-1",children:"Cancel"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:a.length===0?l.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:s("dataroom.noDataRooms")}):l.jsx("div",{className:"space-y-1 p-2",children:a.map(x=>l.jsx("div",{className:`group flex items-center gap-2 p-3 rounded-md cursor-pointer transition-colors h-12 ${(e==null?void 0:e.id)===x.id?"bg-slate-500 text-white":"hover:bg-slate-100 hover:text-slate-900"}`,onClick:()=>!h&&t(x),children:h===x.id?l.jsxs("div",{className:"flex-1 flex gap-1",onClick:v=>v.stopPropagation(),children:[l.jsx("input",{type:"text",value:E,onChange:v=>g(v.target.value),className:"flex-1 px-2 text-sm border border-input rounded bg-background text-foreground h-7",autoFocus:!0,onKeyPress:v=>{v.key==="Enter"&&k(x.id)}}),l.jsx("button",{onClick:()=>k(x.id),className:"p-1 hover:bg-white/20 rounded",children:l.jsx(vt,{size:16})}),l.jsx("button",{onClick:()=>p(null),className:"p-1 hover:bg-white/20 rounded",children:l.jsx(Ne,{size:16})})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("p",{className:"font-medium truncate",children:x.name})}),l.jsxs("div",{className:"hidden group-hover:flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:v=>v.stopPropagation(),children:[l.jsx("button",{onClick:v=>{v.stopPropagation(),F(x.id,x.name)},className:"p-1 hover:bg-white/20 rounded",title:s("folder.rename"),children:l.jsx(bt,{size:16})}),l.jsx("button",{onClick:v=>{v.stopPropagation(),confirm(s("dataroom.deleteConfirm",{name:x.name}))&&r(x.id)},className:"p-1 hover:bg-destructive/20 text-destructive rounded",title:s("folder.delete"),children:l.jsx(yt,{size:16})})]})]})},x.id))})})]})}const Se={MAX_FOLDER_DEPTH:5,ALLOWED_FILE_TYPES:["application/pdf"],ALLOWED_FILE_EXTENSIONS:[".pdf"],DEBOUNCE_DELAY:300};function kn({fileId:a,onClose:e}){const t=A.getFile(a),n=f.useRef(null),[r,o]=f.useState(!1);return f.useEffect(()=>{if(!t||!t.data){o(!1);return}const s=new Blob([t.data],{type:t.type});return n.current=URL.createObjectURL(s),o(!0),()=>{n.current&&(URL.revokeObjectURL(n.current),n.current=null),o(!1)}},[t,a]),!t||!t.data||!r?null:l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e,children:l.jsxs("div",{className:"bg-background rounded-lg shadow-lg w-4/5 h-4/5 flex flex-col",onClick:s=>s.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[l.jsx("h3",{className:"font-semibold truncate",children:t.name}),l.jsx("button",{onClick:e,className:"p-2 hover:bg-red-100/20 rounded flex-shrink-0",children:l.jsx(Ne,{size:20})})]}),l.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center p-4 bg-muted/20",children:l.jsx("iframe",{src:n.current||"",className:"w-full h-full",title:t.name})})]})})}function Cn({folder:a,onUpdate:e}){const{t}=re(),{enqueueSnackbar:n}=sn(),[r,o]=f.useState(new Set([a.id])),[s,i]=f.useState(null),[c,d]=f.useState(""),[m,h]=f.useState(null),[p,E]=f.useState(""),[g,b]=f.useState(null),[k,F]=f.useState(null),x=(u,w=0)=>{const S=A.getFolderStructure(u);return!S||!S.parentFolderId?w:x(S.parentFolderId,w+1)},v=u=>{o(w=>{const S=new Set(w);return S.has(u)?S.delete(u):S.add(u),S})},L=u=>{if(x(u)>=Se.MAX_FOLDER_DEPTH){alert(t("messages.maxNestingDepth"));return}c.trim()&&(A.createFolder(u,c),d(""),i(null),e())},P=u=>{const w=u.type,S=u.name.toLowerCase(),j=Se.ALLOWED_FILE_TYPES.some(M=>w===M||w.includes("pdf")),T=Se.ALLOWED_FILE_EXTENSIONS.some(M=>S.endsWith(M));return j||T},D=()=>l.jsx(vn,{size:18,className:"text-red-500 flex-shrink-0"}),y=(u,w)=>{const j=A.getFilesInFolder(w).map(M=>M.toLowerCase());if(!j.includes(u.toLowerCase()))return u;let T=1;for(;;){const M=`${u} (${T})`;if(!j.includes(M.toLowerCase()))return M;T++}},O=5*1024*1024,$=u=>w=>{const S=w.currentTarget.files;S&&Array.from(S).forEach(j=>{if(j.size>O){const T=(j.size/1024/1024).toFixed(1);n(t("messages.fileTooLarge",{name:j.name,size:T}),{variant:"error"});return}if(P(j)){const T=new FileReader;T.onload=M=>{var N;if(((N=M.target)==null?void 0:N.result)instanceof ArrayBuffer){const Y=y(j.name,u);try{A.uploadFile(u,Y,M.target.result,j.type),n(t("messages.fileUploadSuccess",{name:j.name}),{variant:"success"}),e()}catch(V){const oe=V instanceof Error?V.message:"Unknown error";oe.includes("quota")?n(t("messages.storageQuotaExceeded"),{variant:"error"}):n(t("messages.uploadError",{error:oe}),{variant:"error"})}}},T.onerror=()=>{n(t("messages.fileReadError",{name:j.name}),{variant:"error"})},T.readAsArrayBuffer(j)}else n(t("messages.fileTypeNotSupported",{name:j.name}),{variant:"warning"})}),w.currentTarget.value=""},C=(u,w)=>{Array.from(u).forEach(S=>{if(P(S)){const j=new FileReader;j.onload=T=>{var M;if(((M=T.target)==null?void 0:M.result)instanceof ArrayBuffer){const N=y(S.name,w);A.uploadFile(w,N,T.target.result,S.type),e()}},j.readAsArrayBuffer(S)}else alert(`${t("file.invalidFileFormat")}: ${S.name}`)})},I=u=>{u.preventDefault(),u.stopPropagation()},W=(u,w)=>{u.preventDefault(),u.stopPropagation(),F(w)},Z=u=>{u.preventDefault(),u.stopPropagation(),F(null)},ae=(u,w)=>{u.preventDefault(),u.stopPropagation(),F(null);const S=u.dataTransfer.getData("application/json");if(S)try{const T=JSON.parse(S);if(T.id&&T.type){if(T.type==="folder"&&x(w)>=5){alert(t("messages.cannotMoveFolderDepth"));return}T.type==="file"?A.moveFile(T.id,w):T.type==="folder"&&A.moveFolder(T.id,w),e();return}}catch{}const j=u.dataTransfer.files;j&&j.length>0&&C(j,w)},fe=(u,w)=>{h(u),E(w)},$e=u=>{p.trim()&&(A.getFile(u)?A.updateFileName(u,p):A.updateFolderName(u,p),h(null),E(""),e())},wt=u=>{confirm(t("messages.confirmDelete"))&&(A.getFile(u)?A.deleteFile(u):A.deleteFolderRecursive(u),e())},ze=(u,w)=>{const S="children"in u,j=!("children"in u),T=r.has(u.id),M=m===u.id;return l.jsxs("div",{children:[l.jsxs("div",{className:`flex items-center gap-2 px-2 hover:bg-accent/30 rounded group h-8 border-l-2 border-gray-300 ${S&&k===u.id&&w<5?"bg-blue-100/20 border-2 border-blue-500":""}`,style:{marginLeft:`${w*12}px`,paddingLeft:`${w>0?8:0}px`},draggable:!M,onDragStart:N=>{N.dataTransfer.effectAllowed="move",N.dataTransfer.setData("application/json",JSON.stringify({id:u.id,type:S?"folder":"file"}))},onDragEnd:()=>{},onDragOver:S&&w<5?I:void 0,onDragEnter:S&&w<5?N=>W(N,u.id):void 0,onDragLeave:Z,onDrop:S&&w<5?N=>ae(N,u.id):void 0,children:[S&&l.jsx("button",{onClick:()=>v(u.id),className:"p-1 hover:bg-white/20 rounded","aria-label":T?"Collapse folder":"Expand folder",children:l.jsx(gn,{size:18,style:{transform:T?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"}})}),S?l.jsx(yn,{size:18,className:"text-blue-500 flex-shrink-0"}):D(),M?l.jsxs("div",{className:"flex-1 flex gap-1",onClick:N=>N.stopPropagation(),children:[l.jsx("input",{type:"text",value:p,onChange:N=>E(N.target.value),className:"flex-1 px-2 text-sm border border-input rounded bg-background text-foreground h-6",autoFocus:!0,onKeyPress:N=>{N.key==="Enter"&&$e(u.id)}}),l.jsx("button",{onClick:()=>$e(u.id),className:"p-1 hover:bg-muted rounded",children:l.jsx(vt,{size:16})}),l.jsx("button",{onClick:()=>h(null),className:"p-1 hover:bg-muted rounded",children:l.jsx(Ne,{size:16})})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"flex-1 text-sm truncate cursor-pointer hover:underline",onClick:()=>{j?b(u.id):v(u.id)},children:u.name}),l.jsxs("div",{className:"hidden group-hover:flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[j&&l.jsx("button",{onClick:()=>{const N=A.getFile(u.id);if(N!=null&&N.data){const Y=new Blob([N.data],{type:N.type}),V=URL.createObjectURL(Y);window.open(V,"_blank")}},className:"p-1 hover:bg-white/20 rounded",title:t("file.download"),children:l.jsx(xn,{size:16})}),S&&l.jsxs("label",{className:"p-1 hover:bg-white/20 rounded cursor-pointer",title:t("file.upload"),children:[l.jsx("input",{type:"file",multiple:!0,accept:".pdf",onChange:$(u.id),className:"hidden"}),l.jsx(wn,{size:16})]}),l.jsx("button",{onClick:()=>fe(u.id,u.name),className:"p-1 hover:bg-white/20 rounded",title:t("folder.rename"),children:l.jsx(bt,{size:16})}),l.jsx("button",{onClick:()=>wt(u.id),className:"p-1 hover:bg-destructive/20 text-destructive rounded",title:t("folder.delete"),children:l.jsx(yt,{size:16})})]})]})]}),S&&T&&"children"in u&&l.jsxs("div",{style:{marginLeft:`${(w+1)*12}px`},className:"border-l-2 border-gray-300 pl-2",children:[l.jsxs("div",{className:"flex gap-2 py-2 px-2",children:[l.jsxs("button",{onClick:()=>{if(x(u.id)>=5){alert(t("messages.maxNestingDepth"));return}i(s===u.id?null:u.id)},disabled:x(u.id)>=5,className:"text-xs px-2 py-1 hover:bg-accent/30 rounded border border-input disabled:opacity-50 disabled:cursor-not-allowed",title:t("folder.newFolder"),children:[l.jsx(we,{size:12,className:"inline mr-1"}),t("folder.newFolder")]}),x(u.id)>=5&&l.jsx("span",{className:"text-xs text-amber-600 px-2 py-1",children:t("folder.maxDepthReached")})]}),s===u.id&&l.jsxs("div",{className:"p-2 mx-2 mb-2 border border-input rounded-md space-y-2 bg-accent/10",children:[l.jsx("input",{type:"text",placeholder:t("folder.folderName"),value:c,onChange:N=>d(N.target.value),onKeyPress:N=>{N.key==="Enter"&&L(u.id)},className:"w-full px-2 py-1 border border-input rounded text-sm bg-background",autoFocus:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>L(u.id),disabled:!c.trim(),className:"flex-1 px-2 py-1 text-sm bg-primary text-primary-foreground rounded hover:bg-primary/90 disabled:opacity-50",children:t("buttons.create")}),l.jsx("button",{onClick:()=>{i(null),d("")},className:"flex-1 px-2 py-1 text-sm border border-input rounded hover:bg-accent/30",children:t("buttons.cancel")})]})]}),u.children.sort((N,Y)=>{const V="children"in N,oe="children"in Y;return V&&!oe?-1:!V&&oe?1:N.name.localeCompare(Y.name)}).map(N=>ze(N,w+1))]})]},u.id)};return l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsxs(B,{size:"sm",onClick:()=>i(s===a.id?null:a.id),className:"gap-2 bg-indigo-600 hover:bg-indigo-700 text-white",children:[l.jsx(we,{size:16}),"New Folder"]}),l.jsx("input",{type:"file",id:"root-file-upload",multiple:!0,accept:".pdf",onChange:$(a.id),className:"hidden"}),l.jsxs(B,{size:"sm",onClick:()=>{var u;return(u=document.getElementById("root-file-upload"))==null?void 0:u.click()},className:"gap-2 bg-emerald-600 hover:bg-emerald-700 text-white",children:[l.jsx(we,{size:16}),t("file.upload")]})]}),s===a.id&&l.jsxs("div",{className:"mb-4 p-3 border border-input rounded-md space-y-2 bg-accent/10",children:[l.jsx("input",{type:"text",placeholder:t("folder.folderName"),value:c,onChange:u=>d(u.target.value),onKeyPress:u=>{u.key==="Enter"&&L(a.id)},className:"w-full px-3 py-2 border border-input rounded text-sm bg-background",autoFocus:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(B,{size:"sm",onClick:()=>L(a.id),disabled:!c.trim(),className:"flex-1",children:t("buttons.create")}),l.jsx(B,{size:"sm",variant:"outline",onClick:()=>{i(null),d("")},className:"flex-1",children:t("buttons.cancel")})]})]}),l.jsx("div",{className:"space-y-1",onDragOver:I,onDragEnter:u=>W(u,a.id),onDragLeave:Z,onDrop:u=>ae(u,a.id),children:a.children&&a.children.length>0?a.children.sort((u,w)=>{const S="children"in u,j="children"in w;return S&&!j?-1:!S&&j?1:u.name.localeCompare(w.name)}).map(u=>ze(u,0)):l.jsx("p",{className:"text-sm text-muted-foreground py-4",children:t("folder.empty")})}),l.jsx("div",{className:`mt-4 p-4 border-2 border-dashed rounded-md transition-colors ${k===a.id?"border-blue-500 bg-blue-50/20":"border-gray-300 bg-gray-50/20"}`,onDragOver:I,onDragEnter:u=>W(u,a.id),onDragLeave:Z,onDrop:u=>ae(u,a.id),children:l.jsx("p",{className:"text-sm text-gray-600 text-center",children:t("folder.dragHere")})}),g&&l.jsx(kn,{fileId:g,onClose:()=>b(null)})]})}function Nn({dataRoom:a}){const{t:e}=re(),[t,n]=f.useState(null);f.useEffect(()=>{r()},[a]);const r=()=>{const s=A.getFolderStructure(a.rootFolderId);n(s||null)},o=()=>{r()};return t?l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"p-4 border-b border-border",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:a.name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[e("dataroom.created")," ",new Date(a.createdAt).toLocaleDateString()]})]}),l.jsx("div",{className:"flex-1 overflow-auto",children:l.jsx(Cn,{folder:t,onUpdate:o})})]}):l.jsx("div",{className:"p-4",children:e("dataroom.loading")})}function Fn(){const{i18n:a}=re();return l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>a.changeLanguage("en"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${a.language==="en"?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"English"}),l.jsx("button",{onClick:()=>a.changeLanguage("es"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${a.language==="es"?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Espaol"})]})}function at({onSearch:a,recentSearches:e,onClearSearch:t,initialQuery:n="",initialFilters:r={}}){const{t:o}=re(),[s,i]=f.useState(n),[c,d]=f.useState(!1),[m,h]=f.useState(!1),[p,E]=f.useState({query:n,searchInContent:r.searchInContent!==!1,searchInNames:r.searchInNames!==!1}),g=f.useRef(null),b=f.useRef(null);f.useEffect(()=>(g.current=setTimeout(()=>{a(s,p)},Se.DEBOUNCE_DELAY),()=>{g.current&&clearTimeout(g.current)}),[s,p,a]),f.useEffect(()=>{const D=y=>{b.current&&!b.current.contains(y.target)&&h(!1)};if(m)return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[m]);const k=D=>{const y=D.target.value;i(y),h(y.length>0)},F=f.useCallback(()=>{i(""),h(!1),t()},[t]),x=D=>{i(D),h(!1)},v=(D,y)=>{E(O=>({...O,[D]:y}))},L=D=>{v(D,!p[D])},P=!p.searchInContent||!p.searchInNames;return l.jsxs("div",{className:"w-full bg-white border-b border-border p-4 space-y-3",children:[l.jsxs("div",{className:"relative flex gap-2",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("div",{className:"absolute left-3 top-3 text-muted-foreground",children:l.jsx(rt,{size:18})}),l.jsx("input",{type:"text",value:s,onChange:k,onFocus:()=>s.length>0&&h(!0),placeholder:o("search_placeholder"),className:"w-full pl-10 pr-10 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),s&&l.jsx("button",{onClick:F,className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:l.jsx(Ne,{size:18})}),m&&e.length>0&&l.jsx("div",{ref:b,className:"absolute top-full left-0 right-0 mt-1 bg-white border border-border rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:l.jsxs("div",{className:"p-2",children:[l.jsx("p",{className:"text-xs text-muted-foreground px-2 py-1 font-semibold",children:o("recent_searches")}),e.map((D,y)=>l.jsxs("button",{onClick:()=>x(D),className:"w-full text-left px-3 py-2 hover:bg-accent rounded text-sm transition-colors",children:[l.jsx(rt,{size:14,className:"inline mr-2 text-muted-foreground"}),D]},y))]})})]}),l.jsx("button",{onClick:()=>d(!c),className:`p-2 rounded-md border transition-colors ${P?"border-primary bg-primary/10 text-primary":"border-border hover:bg-accent/20"}`,title:o("filter_results"),children:l.jsx(bn,{size:18})})]}),c&&l.jsxs("div",{className:"bg-accent/20 border border-border rounded-md p-4 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.searchInNames,onChange:()=>L("searchInNames"),className:"w-4 h-4 rounded border-border"}),l.jsx("span",{className:"text-sm",children:o("search_in_names")})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.searchInContent,onChange:()=>L("searchInContent"),className:"w-4 h-4 rounded border-border"}),l.jsx("span",{className:"text-sm",children:o("search_in_content")})]})]}),l.jsx("button",{onClick:()=>{E({query:"",searchInContent:!0,searchInNames:!0})},className:"text-sm text-primary hover:underline",children:o("reset_filters")})]}),P&&!c&&l.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[!p.searchInNames&&l.jsx("span",{className:"px-2 py-1 bg-accent/50 rounded",children:o("names_disabled")}),!p.searchInContent&&l.jsx("span",{className:"px-2 py-1 bg-accent/50 rounded",children:o("content_disabled")})]})]})}function Dn(){return l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx(En,{className:"w-8 h-8 animate-spin text-muted-foreground"})})}const jn=()=>{if(!he.workerSrc&&typeof window<"u"&&!he.workerSrc)try{he.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${jt}/pdf.worker.min.js`}catch{try{he.workerSrc=new URL("/assets/pdf.worker.min-yatZIOMy.mjs",import.meta.url).href}catch{console.warn("PDF worker initialization failed, performance may be degraded")}}},Rn=async a=>{try{if(jn(),!a||a.byteLength===0)return console.warn("PDF buffer is empty"),"";const e=a.slice(0),t=await Dt({data:e}).promise;let n="";for(let o=1;o<=t.numPages;o++)try{const c=(await(await t.getPage(o)).getTextContent()).items.filter(d=>d.str!==void 0&&d.str!==null).map(d=>d.str).join(" ");n+=c+`
`}catch(s){console.warn(`Failed to extract text from page ${o}:`,s);continue}const r=n.trim();return r||console.warn("PDF text extraction returned empty result"),r}catch(e){return console.error("PDF text extraction failed:",e),e instanceof Error&&console.error("Error details:",e.message,e.stack),""}},_n=(a,e,t,n)=>{if(!a.trim())return[];const r=[],o=a.toLowerCase(),s=n[0];return s?(e.forEach(i=>{i.name.toLowerCase().includes(o)&&r.push({fileId:i.id,fileName:i.name,parentFolderPath:Et(i.parentFolderId,t),dataRoomId:s.id,dataRoomName:s.name,matchType:"name",matchedText:i.name,createdAt:i.createdAt,size:i.size})}),r.sort((i,c)=>c.createdAt-i.createdAt)):[]},Ln=async(a,e,t,n)=>{if(!a.trim())return[];const r=[],o=a.toLowerCase(),s=n[0];if(!s)return[];console.log(`[Search] Starting content search for "${a}" in ${e.size} files`);for(const i of Array.from(e.values()))if(i.type==="application/pdf"||i.name.toLowerCase().endsWith(".pdf")){if(!i.data){console.warn(`[Search] File ${i.name} has no data`);continue}try{console.log(`[Search] Extracting text from ${i.name}...`);const d=await Rn(i.data);if(!d){console.warn(`[Search] No text extracted from ${i.name}`);continue}const m=d.toLowerCase();if(m.includes(o)){const h=m.indexOf(o),p=Math.max(0,h-50),E=Math.min(d.length,h+a.length+50),g=d.substring(p,E).trim();console.log(`[Search] Found match in ${i.name}`),r.push({fileId:i.id,fileName:i.name,parentFolderPath:Et(i.parentFolderId,t),dataRoomId:s.id,dataRoomName:s.name,matchType:"content",matchedText:`...${g}...`,createdAt:i.createdAt,size:i.size})}else console.log(`[Search] No match found in ${i.name}`)}catch(d){console.error(`[Search] Error searching content in file ${i.name}:`,d)}}return console.log(`[Search] Content search completed. Found ${r.length} results`),r.sort((i,c)=>c.createdAt-i.createdAt)},In=(a,e,t)=>a.filter(n=>!(e&&n.createdAt<e||t&&n.createdAt>t)),Tn=(a,e,t)=>a.filter(n=>!(e&&n.size<e||t&&n.size>t)),An=async(a,e,t,n)=>{if(!a.query.trim())return[];const r=a.searchInNames!==!1?_n(a.query,e,t,n):[],o=a.searchInContent!==!1?await Ln(a.query,e,t,n):[],s=[...r,...o];let c=Array.from(new Map(s.map(d=>[d.fileId,d])).values());return(a.dateFrom||a.dateTo)&&(c=In(c,a.dateFrom,a.dateTo)),(a.sizeMin||a.sizeMax)&&(c=Tn(c,a.sizeMin,a.sizeMax)),c.sort((d,m)=>d.matchType!==m.matchType?d.matchType==="name"?-1:1:m.createdAt-d.createdAt),c},Et=(a,e)=>{if(!a)return"/";const t=[];let n=a;for(;n;){const r=e.get(n);if(!r)break;r.name!=="root"&&t.unshift(r.name),n=r.parentFolderId}return t.length>0?"/"+t.join("/"):"/"},Pn=f.lazy(()=>dn(()=>import("./SearchResults-vtHMZZQq.js"),__vite__mapDeps([0,1,2,3])));function Mn(){const{t:a}=re(),[e,t]=f.useState(null),[n,r]=f.useState([]),[o,s]=f.useState([]),[i,c]=f.useState(!1),[d,m]=f.useState(!1),[h,p]=f.useState(""),[E,g]=f.useState(()=>{const C=new URLSearchParams(window.location.search);return{searchInContent:C.get("searchInContent")!=="false",searchInNames:C.get("searchInNames")!=="false"}}),[b,k]=f.useState([]);f.useEffect(()=>{L(),P(),F();const I=new URLSearchParams(window.location.search).get("search")||"";I&&p(I)},[]),f.useEffect(()=>{const C=new URLSearchParams;h&&C.set("search",h),E.searchInContent||C.set("searchInContent","false"),E.searchInNames||C.set("searchInNames","false");const I=C.toString()?`?${C.toString()}`:window.location.pathname;window.history.replaceState(null,"",I)},[h,E]);const F=()=>{k(A.getSearchHistory())},x=f.useCallback(async(C,I)=>{if(p(C),g(I),!C.trim()){s([]),m(!1);return}if(!e){s([]),m(!1);return}c(!0);const W=A.getFilesFromDataRoom(e.rootFolderId),Z=new Map;A.getAllFolders().forEach(fe=>{Z.set(fe.id,fe)});const ae=await An({query:C,searchInContent:I.searchInContent,searchInNames:I.searchInNames},W,Z,[e]);s(ae),m(!0),c(!1),A.saveSearchTerm(C),F()},[e]);f.useEffect(()=>{h&&e&&!d&&x(h,E)},[h,e,x,E,d]);const v=f.useCallback(()=>{m(!1),s([]),p("")},[]),L=()=>{r(A.getAllDataRooms())},P=()=>{const C=localStorage.getItem("selectedDataRoomId");if(C){const I=A.getDataRoom(C);I&&t(I)}},D=C=>{const I=A.createDataRoom(C);L(),t(I),localStorage.setItem("selectedDataRoomId",I.id)},y=C=>{t(C),localStorage.setItem("selectedDataRoomId",C.id)},O=C=>{A.deleteDataRoom(C),L(),o.some(W=>W.dataRoomId===C)&&(s([]),m(!1),p("")),(e==null?void 0:e.id)===C&&(t(null),localStorage.removeItem("selectedDataRoomId"))},$=(C,I)=>{A.updateDataRoomName(C,I),(e==null?void 0:e.id)===C&&t({...e,name:I}),L()};return l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Sn,{dataRooms:n,currentDataRoom:e,onSelectDataRoom:y,onCreateDataRoom:D,onDeleteDataRoom:O,onUpdateDataRoomName:$}),l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b border-border flex justify-end",children:l.jsx(Fn,{})}),d?l.jsxs(l.Fragment,{children:[l.jsx(at,{onSearch:x,recentSearches:b,onClearSearch:v,initialQuery:h,initialFilters:E}),l.jsx(f.Suspense,{fallback:l.jsx(Dn,{}),children:l.jsx(Pn,{results:o,isLoading:i,query:h})})]}):e?l.jsxs(l.Fragment,{children:[l.jsx(at,{onSearch:x,recentSearches:b,onClearSearch:v,initialQuery:h,initialFilters:E}),l.jsx(Nn,{dataRoom:e})]}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-2",children:a("app.noDataRoomSelected")}),l.jsx("p",{className:"text-muted-foreground",children:a("app.noDataRoomDescription")})]})})]})]})}const On={title:"Data Room",subtitle:"Manage your files and folders",noDataRoomSelected:"No Data Room Selected",noDataRoomDescription:"Create or select a data room to get started",language:"Language"},$n={newFolder:"New Folder",rename:"Rename",delete:"Delete",maxDepthReached:"Max depth reached",folderName:"Folder name...",empty:"This folder is empty. Create a folder or upload a PDF to get started.",dragHere:"Drag files here to upload to root folder"},zn={upload:"Upload",download:"Download",delete:"Delete",rename:"Rename",preview:"Preview",dropZone:"Drag and drop PDF files here or click to upload",supportedFormat:"Supported format: PDF"},qn={title:"Data Rooms",label:"Data Room",newDataRoom:"New Data Room",rename:"Rename",delete:"Delete",dataroomName:"Data room name...",all:"All Data Rooms",loading:"Loading...",noDataRooms:"No data rooms yet. Create one to get started!",created:"Created",duplicateNameError:'A data room with the name "{name}" already exists. Please choose a different name.',deleteConfirm:'Are you sure you want to delete "{name}"? This will delete all folders and files.'},Hn={save:"Save",cancel:"Cancel",create:"Create",delete:"Delete",edit:"Edit",done:"Done"},Bn={confirmDelete:"Are you sure you want to delete this?",maxNestingDepth:"Maximum nesting depth (5 levels) reached.",cannotMoveFolderDepth:"Cannot move folder here. Maximum nesting depth (5 levels) would be exceeded.",invalidFileFormat:"Supported format: PDF",fileUploadSuccess:'File "{{name}}" uploaded successfully',fileTooLarge:'File "{{name}}" is too large ({{size}} MB). Maximum size is 5 MB.',fileTypeNotSupported:"File type not supported: {{name}}. Supported format: PDF",fileReadError:'Failed to read file "{{name}}"',storageQuotaExceeded:"Storage quota exceeded. Please delete some files or data rooms to continue.",uploadError:"Failed to upload file: {{error}}"},Wn="Search files by name or content...",Vn="Search",Un="Filter Results",Kn="Recent Searches",Xn="Searching...",Qn="No results found",Zn="Try different keywords or check the filters",Yn="Found {{count}} results",Gn="Search in File Names",Jn="Search in File Contents",er="Reset Filters",tr="Names disabled",nr="Content disabled",rr="Name",ar="Content",or={app:On,folder:$n,file:zn,dataroom:qn,buttons:Hn,messages:Bn,search_placeholder:Wn,search_button:Vn,filter_results:Un,recent_searches:Kn,searching:Xn,no_results:Qn,no_results_description:Zn,found_results:Yn,search_in_names:Gn,search_in_content:Jn,reset_filters:er,names_disabled:tr,content_disabled:nr,name_match:rr,content_match:ar},sr={title:"Sala de Datos",subtitle:"Administra tus archivos y carpetas",noDataRoomSelected:"Ninguna Sala de Datos Seleccionada",noDataRoomDescription:"Crea o selecciona una sala de datos para comenzar",language:"Idioma"},ir={newFolder:"Nueva Carpeta",rename:"Renombrar",delete:"Eliminar",maxDepthReached:"Profundidad mxima alcanzada",folderName:"Nombre de la carpeta...",empty:"Esta carpeta est vaca. Crea una carpeta o sube un PDF para comenzar.",dragHere:"Arrastra archivos aqu para subir a la carpeta raz"},lr={upload:"Subir",download:"Descargar",delete:"Eliminar",rename:"Renombrar",preview:"Vista previa",dropZone:"Arrastra y suelta archivos PDF aqu o haz clic para subir",supportedFormat:"Formato soportado: PDF"},cr={title:"Salas de Datos",label:"Sala de Datos",newDataRoom:"Nueva Sala de Datos",rename:"Renombrar",delete:"Eliminar",dataroomName:"Nombre de la sala de datos...",all:"Todas las Salas de Datos",loading:"Cargando...",noDataRooms:"Sin salas de datos an. Crea una para comenzar!",created:"Creado",duplicateNameError:'Una sala de datos con el nombre "{name}" ya existe. Por favor, elige un nombre diferente.',deleteConfirm:'Ests seguro de que quieres eliminar "{name}"? Esto eliminar todas las carpetas y archivos.'},dr={save:"Guardar",cancel:"Cancelar",create:"Crear",delete:"Eliminar",edit:"Editar",done:"Hecho"},ur={confirmDelete:"Ests seguro de que quieres eliminar esto?",maxNestingDepth:"Se alcanz la profundidad mxima de anidamiento (5 niveles).",cannotMoveFolderDepth:"No se puede mover la carpeta aqu. Se excedera la profundidad mxima de anidamiento (5 niveles).",invalidFileFormat:"Formato soportado: PDF",fileUploadSuccess:'Archivo "{{name}}" cargado exitosamente',fileTooLarge:'El archivo "{{name}}" es demasiado grande ({{size}} MB). El tamao mximo es 5 MB.',fileTypeNotSupported:"Tipo de archivo no soportado: {{name}}. Formato soportado: PDF",fileReadError:'Error al leer el archivo "{{name}}"',storageQuotaExceeded:"Cuota de almacenamiento excedida. Por favor, elimina algunos archivos o salas de datos para continuar.",uploadError:"Error al cargar el archivo: {{error}}"},fr="Buscar archivos por nombre o contenido...",mr="Buscar",hr="Filtrar Resultados",pr="Bsquedas Recientes",gr="Buscando...",xr="No se encontraron resultados",vr="Intenta con palabras clave diferentes o verifica los filtros",br="Se encontraron {{count}} resultados",yr="Buscar en Nombres de Archivos",Er="Buscar en Contenido de Archivos",wr="Reiniciar Filtros",Sr="Nombres deshabilitados",kr="Contenido deshabilitado",Cr="Nombre",Nr="Contenido",Fr={app:sr,folder:ir,file:lr,dataroom:cr,buttons:dr,messages:ur,search_placeholder:fr,search_button:mr,filter_results:hr,recent_searches:pr,searching:gr,no_results:xr,no_results_description:vr,found_results:br,search_in_names:yr,search_in_content:Er,reset_filters:wr,names_disabled:Sr,content_disabled:kr,name_match:Cr,content_match:Nr};Ct.use(Nt).use(Ft).init({resources:{en:{translation:or},es:{translation:Fr}},fallbackLng:"en",lng:localStorage.getItem("i18nextLng")||"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});Ie.createRoot(document.getElementById("root")).render(l.jsx(_.StrictMode,{children:l.jsx(on,{maxSnack:3,autoHideDuration:4e3,children:l.jsx(Mn,{})})}));export{yn as F,z as c};
